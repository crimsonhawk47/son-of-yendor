{"version":3,"sources":["webpack:///webpack/bootstrap 7794f12b0c10282051f7","webpack:///./src/js/components/LocationComponent.js","webpack:///./src/js/components/Component.js","webpack:///./src/js/components/RendererComponent.js","webpack:///./src/js/GameObject.js","webpack:///./src/js/components/ColliderComponent.js","webpack:///./src/js/renderer.js","webpack:///./src/js/constants.js","webpack:///./src/js/Math2.js","webpack:///./src/js/components/LocomotionComponent.js","webpack:///./src/js/Actor.js","webpack:///./src/js/components/BodyComponent.js","webpack:///./src/js/index.js","webpack:///./src/js/input.js","webpack:///./src/js/Level.js","webpack:///./src/js/map.js","webpack:///./src/js/Tile.js","webpack:///./src/js/Player.js","webpack:///./src/js/components/PlayerInputComponent.js","webpack:///./src/js/Monster.js","webpack:///./src/js/components/monsterIntelligenceComponents.js"],"names":["LocationComponent","owner","level","x","y","Component","RendererComponent","char","fgColor","bgColor","Object","assign","location","getComponent","renderer","drawCell","GameObject","components","gameObjects","push","component","forEach","addComponent","componentConstructor","filter","update","console","log","ColliderComponent","enabled","cells","init","gameContainer","document","getElementById","style","width","height","backgroundColor","fontFamily","position","fontSize","textAlign","cell","createElement","color","left","top","padding","innerHTML","appendChild","GAME_WIDTH","GAME_HEIGHT","CELL_WIDTH","CELL_HEIGHT","CELL_PADDING","FONT_SIZE","randomRange","range","Math","round","random","randomDirection","LocomotionComponent","dx","dy","collider","previousTile","getTile","tile","tileCollider","Actor","addComponents","BodyComponent","hp","currentLevel","monsters","input","getTileByType","player","i","monsterLocation","monster","tick","keysByCode","letter","String","fromCharCode","toLowerCase","keysByName","keys","reduce","acc","code","listeners","up","down","bindKeyListener","direction","key","listener","directionListeners","which","unbindKeyListener","splice","indexOf","callListeners","event","preventDefault","addEventListener","bind","Level","tiles","generate","type","fillRandom","createPermawall","tileTypes","walkable","Tile","_type","undefined","Player","args","PlayerInputComponent","locomotor","move","moved","monsterData","kobold","ai","Monster","MonsterIntelligenceComponent","RandomMonsterIntelligence","monsterIntelligenceComponents"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7794f12b0c10282051f7","import Component from '~/components/Component.js';\n\nexport default class LocationComponent extends Component {\n    constructor(owner, level, x, y) {\n        super(owner);\n        this.level = level;\n        this.x = x;\n        this.y = y;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/LocationComponent.js","export default class Component {\n    constructor(owner) {\n        this.owner = owner;\n    }\n\n    update() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/Component.js","import Component from '~/components/Component';\nimport Location from '~/components/LocationComponent';\n\nimport * as renderer from '~/renderer';\n\nexport default class RendererComponent extends Component {\n    constructor(owner, char, fgColor = 'white', bgColor = 'black') {\n        super(owner);\n        Object.assign(this, { char, fgColor, bgColor });\n    }\n\n    update() {\n        const { char, fgColor, bgColor } = this;\n        const location = this.owner.getComponent(Location);\n        if (!location) return;\n        renderer.drawCell(location.x, location.y, char, fgColor, bgColor);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/RendererComponent.js","export default class GameObject {\n    constructor(components) {\n        this.components = [];\n        GameObject.gameObjects.push(this);\n    }\n\n    addComponent(component) {\n        component.owner = this;\n        this.components.push(component);\n    }\n\n    addComponents(components) {\n        components.forEach(component => this.addComponent(component));\n    }\n\n    getComponent(componentConstructor) {\n        return this.components.filter(\n            (component) => (component instanceof componentConstructor),\n        )[0];\n    }\n\n    update() {\n        this.components.forEach((component) => {\n            if (!component.update) console.log(component);\n            component.update();\n        });\n    }\n}\n\nGameObject.gameObjects = [];\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/GameObject.js","import Component from '~/components/Component';\n\nexport default class ColliderComponent extends Component {\n    constructor(owner, enabled) {\n        super(owner);\n        this.enabled = enabled;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/ColliderComponent.js","import {\n    GAME_WIDTH,\n    GAME_HEIGHT,\n    CELL_WIDTH,\n    CELL_HEIGHT,\n    CELL_PADDING,\n    FONT_SIZE,\n} from '~/constants';\n\nlet cells;\n\nexport function init() {\n    const gameContainer = document.getElementById('game');\n    Object.assign(gameContainer.style, {\n        width: GAME_WIDTH * CELL_WIDTH,\n        height: GAME_HEIGHT * CELL_HEIGHT,\n        backgroundColor: 'black',\n        fontFamily: 'Courier',\n        position: 'absolute',\n        fontSize: `${FONT_SIZE}px`,\n        textAlign: 'center',\n    });\n\n    cells = {};\n    for (let x = 0; x < GAME_WIDTH; x++) {\n        for (let y = 0; y < GAME_HEIGHT; y++) {\n            const cell = cells[`${x},${y}`] = document.createElement('div');\n            Object.assign(cell.style, {\n                width: CELL_WIDTH,\n                height: CELL_HEIGHT,\n                backgroundColor: 'black',\n                color: 'white',\n                position: 'absolute',\n                left: x * CELL_WIDTH,\n                top: y * CELL_HEIGHT,\n                padding: `${CELL_PADDING}px`,\n            });\n            cell.innerHTML = '.';\n            gameContainer.appendChild(cell);\n        }\n    }\n}\n\nexport function drawCell(x, y, char, fgColor, bgColor) {\n    const cell = cells[`${x},${y}`];\n    Object.assign(cell.style, {\n        color: fgColor,\n        backgroundColor: bgColor,\n    });\n    cell.innerHTML = char;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/renderer.js","export const GAME_WIDTH = 80;\nexport const GAME_HEIGHT = 24;\nexport const CELL_WIDTH = 17;\nexport const CELL_HEIGHT = 24;\nexport const CELL_PADDING = 3;\nexport const FONT_SIZE = 22;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/constants.js","export function randomRange(range) {\n    return Math.round(Math.random() * range);\n}\n\nexport function randomDirection() {\n    const x = randomRange(2) - 1;\n    const y = randomRange(2) - 1;\n    return { x, y };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Math2.js","import Component from '~/components/Component';\nimport Location from '~/components/LocationComponent';\nimport Collider from '~/components/ColliderComponent';\n\nexport default class LocomotionComponent extends Component {\n    move(dx, dy) {\n        const location = this.owner.getComponent(Location);\n        const collider = this.owner.getComponent(Collider);\n        const x = location.x + dx;\n        const y = location.y + dy;\n        const previousTile = location.level.getTile(location.x, location.y);\n        const tile = location.level.getTile(x, y);\n        const tileCollider = tile.getComponent(Collider);\n\n        if (\n            collider &&\n            collider.enabled &&\n            tileCollider &&\n            tileCollider.enabled\n        ) {\n            return false;\n        }\n\n        location.x = x;\n        location.y = y;\n        this.owner.update();\n        previousTile.update();\n        return true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/LocomotionComponent.js","import GameObject from '~/GameObject';\n\nimport Location from '~/components/LocationComponent';\nimport Locomotion from '~/components/LocomotionComponent';\nimport Renderer from '~/components/RendererComponent';\nimport Collider from '~/components/ColliderComponent';\nimport Body from '~/components/BodyComponent';\n\nexport default class Actor extends GameObject {\n    constructor(level, x, y) {\n        super();\n        this.addComponents([\n            new Location(this, level, x, y),\n            new Locomotion(this),\n            new Renderer(this, '@', 'white'),\n            new Collider(this, true),\n            new Body(this, 10),\n        ]);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Actor.js","import Component from '~/components/Component';\n\nexport default class BodyComponent extends Component {\n    constructor(owner, hp) {\n        super(owner);\n        this.hp = hp;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/BodyComponent.js","import Location from '~/components/LocationComponent';\n\nimport * as input from '~/input';\nimport * as renderer from '~/renderer';\n\nimport Level from '~/Level';\nimport Player from '~/Player';\nimport Monster from '~/Monster';\n\nlet currentLevel;\nlet monsters = [];\n\nfunction init() {\n    console.log('Initializing game');\n\n    input.init();\n    renderer.init();\n    \n    currentLevel = new Level(1);\n\n    const location = currentLevel.getTileByType('floor').getComponent(Location);\n    const player = new Player(currentLevel, location.x, location.y);\n    player.update();\n\n    for (let i = 0; i < 40; i++) { \n        const monsterLocation = currentLevel\n            .getTileByType('floor')\n            .getComponent(Location);\n        const monster = new Monster(\n            'kobold',\n            currentLevel,\n            monsterLocation.x,\n            monsterLocation.y,\n        );\n        monster.update();\n        monsters.push(monster);\n    }\n}\n\nexport function tick() {\n    console.log('Game tick');\n    monsters.forEach(monster => monster.tick());\n}\n\ninit();\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","const keysByCode = {\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n};\n\nfor (let letter = 65; letter < 91; letter++) {\n    keysByCode[letter] = String.fromCharCode(letter).toLowerCase();\n}\n\nconst keysByName = Object\n    .keys(keysByCode)\n    .reduce(\n        (acc, code) => Object.assign(acc, { [keysByCode[code]]: code }),\n        {},\n    );\n\nconst listeners = {up: {}, down: {}};\n\nexport function bindKeyListener(direction, key, listener) {\n    const directionListeners = listeners[direction];\n    const which = keysByName[key];\n    if (directionListeners[which]) {\n        directionListeners[which].push(listener);\n    } else {\n        directionListeners[which] = [listener];\n    }\n}\n\nexport function unbindKeyListener(direction, key, listener) {\n    const which = keysByName[key];\n    const directionListeners = listeners[direction][which];\n    directionListeners.splice(directionListeners.indexOf(listener), 1);\n}\n\nfunction callListeners(direction, event) {\n    if (event) event.preventDefault();\n    const directionListeners = listeners[direction][event.which];\n    if (directionListeners) directionListeners.forEach(listener => listener());\n}\n\nexport function init() {\n    document.addEventListener('keydown', callListeners.bind(null, 'down'));\n    document.addEventListener('keyup', callListeners.bind(null, 'up'));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/input.js","import GameObject from '~/GameObject';\n\nimport { GAME_WIDTH, GAME_HEIGHT } from '~/constants';\nimport { randomRange } from '~/Math2';\nimport { fillRandom, createPermawall } from '~/map';\n\nexport default class Level extends GameObject {\n    constructor(level) {\n        super();\n\n        this.level = level;\n        this.width = GAME_WIDTH;\n        this.height = GAME_HEIGHT;\n        this.tiles = {};\n        this.generate();\n    }\n\n    generate() {\n        fillRandom(this);\n        createPermawall(this);\n    }\n\n    getTile(x, y) {\n        return this.tiles[`${x},${y}`];\n    }\n    \n    getTileByType(type) {\n        let x;\n        let y;\n        let tile;\n\n        while (!tile || tile.type !== type) {\n            x = randomRange(this.width);\n            y = randomRange(this.height);\n            tile = this.getTile(x, y);\n        }\n\n        return tile;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Level.js","import Tile from '~/Tile';\n\nexport function fillRandom(level) {\n    for (let x = 0; x < level.width; x++) {\n        for (let y = 0; y < level.height; y++) {\n            const tile = level.tiles[`${x},${y}`] = new Tile(\n                level,\n                x,\n                y,\n                Math.random() > 0.8 ? 'wall' : 'floor',\n            );\n            tile.update();\n        }\n    }\n}\n\nexport function createPermawall(level) {\n    for (let x = 0; x < level.width; x++) {\n        level.getTile(x, 0).type = 'wall';\n        level.getTile(x, level.height - 1).type = 'wall';\n    }\n\n    for (let y = 0; y < level.height; y++) {\n        level.getTile(0, y).type = 'wall';\n        level.getTile(level.width - 1, y).type = 'wall';\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/map.js","import GameObject from '~/GameObject';\nimport Location from '~/components/LocationComponent';\nimport Renderer from '~/components/RendererComponent';\nimport Collider from '~/components/ColliderComponent';\n\nconst tileTypes = {\n    'floor': {\n        char: '.',\n        fgColor: 'white',\n        bgColor: 'black',\n        walkable: true,\n    },\n    'wall': {\n        char: '#',\n        fgColor: 'white',\n        bgColor: 'black',\n        walkable: false,\n    },\n};\n\nexport default class Tile extends GameObject {\n    constructor(level, x, y, type) {\n        super();\n        this.addComponents([\n            new Location(this, level, x, y),\n            new Renderer(this),\n            new Collider(this),\n        ]);\n        this.type = type;\n    }\n\n    set type(_type) {\n        this._type = _type;\n        const { char, fgColor, bgColor, walkable } = tileTypes[_type];\n        Object.assign(\n            this.getComponent(Renderer),\n            { char, fgColor, bgColor },\n        );\n        Object.assign(\n            this.getComponent(Collider),\n            { enabled: !walkable },\n        );\n        this.update();\n    }\n\n    get type() {\n        return this._type;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Tile.js","typeof undefined;\nimport Renderer from '~/components/RendererComponent';\nimport PlayerInput from '~/components/PlayerInputComponent';\n\nimport Actor from '~/Actor';\n\nexport default class Player extends Actor {\n    constructor(...args) {\n        super(...args);\n        this.addComponent(new PlayerInput(this));\n        this.getComponent(Renderer).fgColor = 'red';\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Player.js","import Component from '~/components/Component';\nimport Location from '~/components/LocationComponent';\nimport Locomotion from '~/components/LocomotionComponent';\n\nimport { bindKeyListener } from '~/input';\n\nimport { tick } from '~/index';\n\nexport default class PlayerInputComponent extends Component {\n    constructor(...args) {\n        super(...args);\n        \n        const locomotor = this.owner.getComponent(Location);\n        bindKeyListener('down', 'left', this.move.bind(this, -1, 0));\n        bindKeyListener('down', 'up', this.move.bind(this, 0, -1));\n        bindKeyListener('down', 'right', this.move.bind(this, 1, 0));\n        bindKeyListener('down', 'down', this.move.bind(this, 0, 1));\n    }\n\n    move(x, y) {\n        const locomotor = this.owner.getComponent(Locomotion);\n        const moved = locomotor.move(x, y);\n        if (moved) tick();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/PlayerInputComponent.js","import Actor from '~/Actor';\n\nimport Renderer from '~/components/RendererComponent';\nimport Body from '~/components/BodyComponent';\nimport MonsterIntelligence, { monsterIntelligenceComponents }\n    from '~/components/monsterIntelligenceComponents';\n\nconst monsterData = {\n    kobold: {\n        char: 'k',\n        fgColor: 'green',\n        ai: 'random',\n        hp: 10,\n    },\n};\n\nexport default class Monster extends Actor {\n    constructor(type, ...args) {\n        super(...args);\n        this.type = type;\n        const { char, fgColor, ai, hp } = monsterData[type];\n        Object.assign(\n            this.getComponent(Renderer),\n            { char, fgColor },\n        );\n        Object.assign(\n            this.getComponent(Body),\n            { hp },\n        );\n        this.addComponent(new monsterIntelligenceComponents[ai]);\n    }\n\n    tick() {\n        this.getComponent(MonsterIntelligence).tick();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Monster.js","import Component from '~/components/Component';\nimport Locomotion from '~/components/LocomotionComponent';\n\nimport { randomDirection } from '~/Math2';\n\nexport default class MonsterIntelligenceComponent extends Component {\n    tick() {}\n}\n\nclass RandomMonsterIntelligence extends MonsterIntelligenceComponent {\n    tick() {\n        const { x, y } = randomDirection();\n        this.owner.getComponent(Locomotion).move(x, y);\n    }\n}\n\nconst monsterIntelligenceComponents = {\n    random: RandomMonsterIntelligence,\n};\n\nexport { monsterIntelligenceComponents };\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/monsterIntelligenceComponents.js"],"sourceRoot":""}